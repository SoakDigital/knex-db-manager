<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Supported Databases | knex-db-manager</title>
    <meta name="description" content="Tool to create / drop / truncate / copy SQL database">
    
    
    <link rel="preload" href="/assets/css/0.styles.125abfc7.css" as="style"><link rel="preload" href="/assets/js/app.ad0f03c5.js" as="script"><link rel="preload" href="/assets/js/3.402a39ec.js" as="script"><link rel="prefetch" href="/assets/js/2.25c11553.js"><link rel="prefetch" href="/assets/js/4.cb76bf7a.js"><link rel="prefetch" href="/assets/js/5.36832322.js">
    <link rel="stylesheet" href="/assets/css/0.styles.125abfc7.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-exact-active router-link-active"><!----> <span class="site-name">knex-db-manager</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link router-link-exact-active router-link-active">Home</a></div><div class="nav-item"><a href="/changelog/" class="nav-link">Changelog</a></div><div class="nav-item"><a href="https://github.com/Vincit/knex-db-manager" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link router-link-exact-active router-link-active">Home</a></div><div class="nav-item"><a href="/changelog/" class="nav-link">Changelog</a></div><div class="nav-item"><a href="https://github.com/Vincit/knex-db-manager" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/" class="active sidebar-link">Home</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/#supported-databases" class="sidebar-link">Supported Databases</a></li><li class="sidebar-sub-header"><a href="/#install" class="sidebar-link">Install</a></li><li class="sidebar-sub-header"><a href="/#api-usage" class="sidebar-link">API &amp; Usage</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/#createdbownerifnotexist-promise-void" class="sidebar-link">createDbOwnerIfNotExist(): Promise&lt;void&gt;</a></li><li class="sidebar-sub-header"><a href="/#createdb-dbname-string-promise-void" class="sidebar-link">createDb(dbName?: string): Promise&lt;void&gt;</a></li><li class="sidebar-sub-header"><a href="/#dropdb-dbname-string-promise-void" class="sidebar-link">dropDb(dbName?: string): Promise&lt;void&gt;</a></li><li class="sidebar-sub-header"><a href="/#copydb-fromdbname-string-todbname-string-promise-void" class="sidebar-link">copyDb(fromDbName: string, toDbName: string): Promise&lt;void&gt;</a></li><li class="sidebar-sub-header"><a href="/#truncatedb-ignoretables-string-promise-void" class="sidebar-link">truncateDb(ignoreTables?: string[]): Promise&lt;void&gt;</a></li><li class="sidebar-sub-header"><a href="/#updateidsequences-promise-void" class="sidebar-link">updateIdSequences(): Promise&lt;void&gt;</a></li><li class="sidebar-sub-header"><a href="/#populatedb-glob-string-promise-void" class="sidebar-link">populateDb(glob: string): Promise&lt;void&gt;</a></li><li class="sidebar-sub-header"><a href="/#migratedb-promise-void" class="sidebar-link">migrateDb(): Promise&lt;void&gt;</a></li><li class="sidebar-sub-header"><a href="/#dbversion-promise-string" class="sidebar-link">dbVersion(): Promise&lt;string&gt;</a></li><li class="sidebar-sub-header"><a href="/#close-promise-void" class="sidebar-link">close(): Promise&lt;void&gt;</a></li><li class="sidebar-sub-header"><a href="/#closeknex-promise-void" class="sidebar-link">closeKnex(): Promise&lt;void&gt;</a></li><li class="sidebar-sub-header"><a href="/#knexinstance-querybuilder" class="sidebar-link">knexInstance(): QueryBuilder</a></li></ul></li></ul></li><li><a href="/changelog/" class="sidebar-link">Changelog</a><ul class="sidebar-sub-headers"></ul></li></ul> </div> <div class="page"> <div class="content"><p><a href="https://travis-ci.org/Vincit/knex-db-manager" target="_blank" rel="noopener noreferrer"><img src="https://travis-ci.org/Vincit/knex-db-manager.svg?branch=master" alt="Build Status"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <a href="https://coveralls.io/github/Vincit/knex-db-manager?branch=master" target="_blank" rel="noopener noreferrer"><img src="https://coveralls.io/repos/github/Vincit/knex-db-manager/badge.svg?branch=master" alt="Coverage Status"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <a href="https://greenkeeper.io/" target="_blank" rel="noopener noreferrer"><img src="https://badges.greenkeeper.io/Vincit/knex-db-manager.svg" alt="Greenkeeper badge"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>Pretty useful when writing scripts to initialize database for fresh install or
dropping / creating new database when running tests and for truncating database
between tests.</p> <p>Library uses knex connection for non administrative queries, but also creates
priviliged connection directly with driver with superuser privileges for creating
and dropping databases / roles.</p> <h2 id="supported-databases"><a href="#supported-databases" aria-hidden="true" class="header-anchor">#</a> Supported Databases</h2> <ul><li>PostgreSQL</li> <li>MySQL</li> <li><s>SQLite3 (TBD even though most of the functions won't make sense with this)</s></li> <li><s>Oracle DB Express (TBD)</s></li> <li><s>MSSQL (TBD if we can get integration tests to run automatically)</s></li></ul> <h2 id="install"><a href="#install" aria-hidden="true" class="header-anchor">#</a> Install</h2> <p>You need to install <code>knex</code>, database driver and <code>knex-db-manager</code></p> <div class="language- extra-class"><pre class="language-text"><code>npm install knex-db-manager knex pg pg-escape
</code></pre></div><h2 id="api-usage"><a href="#api-usage" aria-hidden="true" class="header-anchor">#</a> API &amp; Usage</h2> <p>Database manager is initialized with normal <code>knex</code> configuration and with
superuser account which should be able to create / drop roles and databases.</p> <blockquote><p>Initialization:</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> config <span class="token operator">=</span> <span class="token punctuation">{</span>
  knex<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// just the usual knex configuration</span>
    client<span class="token punctuation">:</span> <span class="token string">'postgres'</span><span class="token punctuation">,</span>
    connection<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      host<span class="token punctuation">:</span> <span class="token string">'localhost'</span><span class="token punctuation">,</span>
      database<span class="token punctuation">:</span> <span class="token string">'appdb'</span><span class="token punctuation">,</span>
      user<span class="token punctuation">:</span> <span class="token string">'dbowneruser'</span><span class="token punctuation">,</span>
      password<span class="token punctuation">:</span> <span class="token string">'dbownerpassword'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    pool<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      min<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
      max<span class="token punctuation">:</span> <span class="token number">10</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    migrations<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      directory<span class="token punctuation">:</span> __dirname <span class="token operator">+</span> <span class="token string">'/migrations'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  dbManager<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// db manager related configuration</span>
    collate<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'fi_FI.UTF-8'</span><span class="token punctuation">,</span> <span class="token string">'Finnish_Finland.1252'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    superUser<span class="token punctuation">:</span> <span class="token string">'userwithrightstocreateusersanddatabases'</span><span class="token punctuation">,</span>
    superPassword<span class="token punctuation">:</span> <span class="token string">'privilegeduserpassword'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> dbManager <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'knex-db-manager'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">databaseManagerFactory</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="createdbownerifnotexist-promise-void"><a href="#createdbownerifnotexist-promise-void" aria-hidden="true" class="header-anchor">#</a> <code>createDbOwnerIfNotExist(): Promise&lt;void&gt;</code></h3> <p>Creates the user, which is described in <code>knex</code> configuration. This user is used as
the database owner when creating new databases.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> promise <span class="token operator">=</span> dbManager<span class="token punctuation">.</span><span class="token function">createDbOwnerIfNotExist</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="createdb-dbname-string-promise-void"><a href="#createdb-dbname-string-promise-void" aria-hidden="true" class="header-anchor">#</a> <code>createDb(dbName?: string): Promise&lt;void&gt;</code></h3> <p>Creates database described in <code>knex</code> configuration or by given name. Owner of the
created database is set to be the <code>config.knex.connection.user</code>.</p> <p><code>dbName</code> is the name of the database to be created, if not given the name is read
from <code>config.knex.connection.database</code>.</p> <blockquote><p>Read database from <code>config.knex.connection.database</code>:</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> promise <span class="token operator">=</span> dbManager<span class="token punctuation">.</span><span class="token function">createDb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p>By given name:</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> promise <span class="token operator">=</span> dbManager<span class="token punctuation">.</span><span class="token function">createDb</span><span class="token punctuation">(</span><span class="token string">'brave-new-db'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="dropdb-dbname-string-promise-void"><a href="#dropdb-dbname-string-promise-void" aria-hidden="true" class="header-anchor">#</a> <code>dropDb(dbName?: string): Promise&lt;void&gt;</code></h3> <p>Drops database described in <code>knex</code> configuration or by given name. Note
that if there are any active connections to the database that is being
dropped, the drop command might fail.</p> <p><code>dbName</code> is the name of the database to be dropped, if not given the name
is read from <code>config.knex.connection.database</code>.</p> <blockquote><p>Drop database <code>config.knex.connection.database</code>:</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> promise <span class="token operator">=</span> dbManager<span class="token punctuation">.</span><span class="token function">dropDb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p>By specific name:</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> promise <span class="token operator">=</span> dbManager<span class="token punctuation">.</span><span class="token function">dropDb</span><span class="token punctuation">(</span><span class="token string">'brave-new-db'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="copydb-fromdbname-string-todbname-string-promise-void"><a href="#copydb-fromdbname-string-todbname-string-promise-void" aria-hidden="true" class="header-anchor">#</a> <code>copyDb(fromDbName: string, toDbName: string): Promise&lt;void&gt;</code></h3> <p>Clones database to another name remotely on db serverside (may be useful e.g.
to make backup before running migrations).</p> <p>New database <code>toDatabaseName</code> will be created containing a copy of <code>fromDbName</code>.</p> <p>Note: This method is not supported with MySQL (yet).</p> <blockquote><p>Making copy of DB:</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> promise <span class="token operator">=</span> dbManager<span class="token punctuation">.</span><span class="token function">copyDb</span><span class="token punctuation">(</span><span class="token string">'brave-new-db'</span><span class="token punctuation">,</span> <span class="token string">'brave-new-db-copy'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="truncatedb-ignoretables-string-promise-void"><a href="#truncatedb-ignoretables-string-promise-void" aria-hidden="true" class="header-anchor">#</a> <code>truncateDb(ignoreTables?: string[]): Promise&lt;void&gt;</code></h3> <p>Truncate tables of the database and reset corresponding id sequences.</p> <p><code>ignoreTables</code> list of tables names which should not be truncated.</p> <blockquote><p>Truncate database <code>config.knex.connection.database</code>:</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> promise <span class="token operator">=</span> dbManager<span class="token punctuation">.</span><span class="token function">truncateDb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p>ignore certain tables:</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> promise <span class="token operator">=</span> dbManager<span class="token punctuation">.</span><span class="token function">truncateDb</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'migrations'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="updateidsequences-promise-void"><a href="#updateidsequences-promise-void" aria-hidden="true" class="header-anchor">#</a> <code>updateIdSequences(): Promise&lt;void&gt;</code></h3> <p>Updates all primary key id sequences to be biggest id in table + 1.
So after running this next <code>INSERT</code> to table will get valid id for
the row from the sequence.</p> <p>This was motivated by some people who liked to create test data with
hard coded ids, so this helps them to make app to work normally after
adding rows to tables, which has not used id sequence to get ids.</p> <p>The function assumes that the primary key for each table is called <code>id</code>.</p> <p>Note: This method is not supported with MySQL (yet).</p> <blockquote><p>Reset sequence of database <code>config.knex.connection.database</code>:</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> promise <span class="token operator">=</span> dbManager<span class="token punctuation">.</span><span class="token function">updateIdSequences</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="populatedb-glob-string-promise-void"><a href="#populatedb-glob-string-promise-void" aria-hidden="true" class="header-anchor">#</a> <code>populateDb(glob: string): Promise&lt;void&gt;</code></h3> <p>Finds <code>knex</code> seed files by pattern and populate database with them.</p> <p><code>glob</code> is a pattern to match files to be ran, if not given the name is
read from <code>config.dbManager.populatePathPattern</code>.</p> <blockquote><p>Get database from <code>config.knex.connection.database</code> and pattern
from <code>config.dbManager.populatePathPattern</code>:</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> promise <span class="token operator">=</span> dbManager<span class="token punctuation">.</span><span class="token function">populateDb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p>with pattern:</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> promise <span class="token operator">=</span> dbManager<span class="token punctuation">.</span><span class="token function">populateDb</span><span class="token punctuation">(</span>
    path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'seeds'</span><span class="token punctuation">,</span> <span class="token string">'test-*'</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="migratedb-promise-void"><a href="#migratedb-promise-void" aria-hidden="true" class="header-anchor">#</a> <code>migrateDb(): Promise&lt;void&gt;</code></h3> <p>Runs <code>knex</code> migrations configured in knex config.</p> <blockquote><p>Get database from <code>config.knex.connection.database</code>:</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> promise <span class="token operator">=</span> dbManager<span class="token punctuation">.</span><span class="token function">migrateDb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="dbversion-promise-string"><a href="#dbversion-promise-string" aria-hidden="true" class="header-anchor">#</a> <code>dbVersion(): Promise&lt;string&gt;</code></h3> <p>Checks which migrations has been ran to database.</p> <p>Expects that migration name starts with timestamp.</p> <p>If no migrations has been run, promise resolves to <code>'none'</code>. Otherwise
resolves to first numbers of latest migration file ran e.g. for
<code>20141024070315_test_schema.js</code> version will be <code>'20141024070315'</code>.</p> <blockquote><p>Get database from <code>config.knex.connection.database</code>:</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> promise <span class="token operator">=</span> dbManager<span class="token punctuation">.</span><span class="token function">dbVersion</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="close-promise-void"><a href="#close-promise-void" aria-hidden="true" class="header-anchor">#</a> <code>close(): Promise&lt;void&gt;</code></h3> <p>Closes the single privileged connection to database server.</p> <blockquote><p>Kill database connection:</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> promise <span class="token operator">=</span> dbManager<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="closeknex-promise-void"><a href="#closeknex-promise-void" aria-hidden="true" class="header-anchor">#</a> <code>closeKnex(): Promise&lt;void&gt;</code></h3> <p>Closes knex connection which is made to the database for unprivileged
queries. Sometimes this is needed e.g. for being able to drop database.</p> <blockquote><p>Close knex connection</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> promise <span class="token operator">=</span> dbManager<span class="token punctuation">.</span><span class="token function">closeKnex</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="knexinstance-querybuilder"><a href="#knexinstance-querybuilder" aria-hidden="true" class="header-anchor">#</a> <code>knexInstance(): QueryBuilder</code></h3> <p>Returns <code>knex</code> query builder bound to configured database.</p> <blockquote><p>Get database from <code>config.knex.connection.database</code>:</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> knex <span class="token operator">=</span> dbManager<span class="token punctuation">.</span><span class="token function">knexInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">knex</span><span class="token punctuation">(</span><span class="token string">'table'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string">'id'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>rows <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Query was ran with db owner privileges'</span><span class="token punctuation">,</span> rows<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div> <div class="page-edit"><!----> <!----></div> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/changelog/">
          Changelog
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/assets/js/app.ad0f03c5.js" defer></script><script src="/assets/js/3.402a39ec.js" defer></script>
  </body>
</html>
